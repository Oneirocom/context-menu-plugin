{"version":3,"file":"context-menu-plugin.esm.js","sources":["../src/utils.js","../src/menu/debounceHide.js","../src/menu/Item.vue","../src/menu/Search.vue","../src/menu/Menu.vue","../src/menu/index.js","../src/main-menu.js","../src/node-menu.js","../src/index.js"],"sourcesContent":["export function deepCopy(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\n\nexport async function createNode(component, { data = {}, meta = {}, x = 0, y = 0 }) {\n    const node = await component.createNode(deepCopy(data));\n\n    node.meta = Object.assign(deepCopy(meta), node.meta);\n    node.position[0] = x;\n    node.position[1] = y;\n    \n    return node;\n}\n\nexport function traverse(items, callback, path = []) {\n    if (typeof items !== 'object') return;\n\n    Object.keys(items).map(key => {\n        if (typeof items[key] === 'function')\n            callback(key, items[key], path)\n        else \n            traverse(items[key], callback, [...path, key])\n    })\n}\n\nexport function fitViewport([x, y], element) {\n    return [\n        Math.min(x, window.innerWidth - element.clientWidth),\n        Math.min(y, window.innerHeight - element.clientHeight)\n    ]\n}","import { debounce } from 'lodash-es';\n\nexport default (hideMethod) => ({\n    props: { delay: { type: Number, required: true } },\n    data() {\n        return {\n            timeoutHide: () => {}\n        }\n    },\n    methods: {\n        cancelHide() {\n            const hide = this.timeoutHide;\n    \n            if (hide && hide.cancel)\n                this.timeoutHide.cancel();\n        }\n    },\n    mounted() {\n        this.timeoutHide = debounce(this[hideMethod], this.delay);\n    }\n})","<template lang=\"pug\">\n.item(\n  @click=\"onClick($event)\"\n  @mouseover=\"showSubitems()\"\n  @mouseleave=\"timeoutHide()\"\n  :class=\"{ hasSubitems }\"\n) {{item.title}}\n  .subitems(v-show=\"hasSubitems && this.visibleSubitems\")\n    Item(v-for=\"subitem in item.subitems\"\n      :key=\"subitem.title\"\n      :item=\"subitem\"\n      :args=\"args\"\n      :delay=\"delay\"\n      )\n</template>\n\n<script>\nimport hideMixin from './debounceHide'\n\nexport default {\n  name: 'Item',\n  mixins: [hideMixin('hideSubitems')],\n  props: { item: Object, args: Object },\n  data() {\n    return {\n      visibleSubitems: false, \n    }\n  },\n  computed: {\n    hasSubitems() {\n      return this.item.subitems\n    }\n  },\n  methods: {\n    showSubitems() {\n      this.visibleSubitems = true;\n      this.cancelHide();\n    },\n    hideSubitems() {\n      this.visibleSubitems = false;\n    },\n    onClick(e) {\n      e.stopPropagation();\n      \n      if(this.item.onClick)\n        this.item.onClick(this.args);\n      this.$root.$emit('hide');\n    }\n  }\n}\n</script>\n\n\n<style lang=\"sass\" scoped>\n@import '../vars.sass'\n@import '../common.sass'\n\n.item\n  @extend .item\n  &.hasSubitems:after\n    content: 'â–º'\n    position: absolute\n    opacity: 0.6\n    right: 5px\n    top: 5px\n  .subitems\n    position: absolute\n    top: 0\n    left: 100%\n    width: $width\n    .subitem\n      @extend .item\n</style>\n","<template lang=\"pug\">\n.search\n  input(v-model=\"value\")\n</template>\n\n<script>\nexport default {\n  props: ['value', 'search'],\n  watch: {\n    value() {\n      this.$emit('search', this.value);\n    }\n  }\n}\n</script>\n\n\n<style lang=\"sass\" scoped>\n.search\n  input    \n    color: white\n    padding: 1px 8px\n    border: 1px solid white\n    border-radius: 10px\n    font-size: 16px\n    font-family: serif\n    width: 100%\n    box-sizing: border-box\n    background: transparent\n</style>\n","<template lang=\"pug\">\n.context-menu(\n  ref=\"menu\"\n  v-if=\"visible\"\n  v-bind:style=\"style\",\n  @mouseleave='timeoutHide()',\n  @mouseover=\"cancelHide()\"\n  @contextmenu.prevent=\"\"\n  @wheel.stop=\"\"\n)\n  Search(v-if=\"searchBar\", v-model=\"filter\", @search=\"onSearch\")\n  Item(v-for='item in filtered'\n    :key=\"item.title\"\n    :item=\"item\"\n    :args=\"args\"\n    :delay=\"delay / 2\"\n  )\n</template>\n\n<script>\nimport hideMixin from './debounceHide'\nimport Item from './Item.vue';\nimport Search from './Search.vue';\nimport { fitViewport } from '../utils';\n\nexport default {\n  props: { searchBar: Boolean, searchKeep: Function },\n  mixins: [hideMixin('hide')],\n  data() {\n    return {\n      x: 0,\n      y: 0,\n      visible: false,\n      args: {},\n      filter: '',\n      items: [],\n    }\n  },\n  computed: {\n    style() {\n      return {\n        top: this.y+'px', \n        left: this.x+'px'\n      }\n    },\n    filtered() {\n      if(!this.filter) return this.items;\n      const regex = new RegExp(this.filter, 'i');\n      \n      return this.extractLeafs(this.items)\n        .filter(({ title }) => {\n          return this.searchKeep(title) || title.match(regex)\n        });\n    }\n  },\n  methods: {\n    extractLeafs(items) {\n      if(!items) return [];\n      let leafs = [];\n      items.map(item => {\n        if(!item.subitems) leafs.push(item)\n\n        leafs.push(...this.extractLeafs(item.subitems))\n      })\n\n      return leafs;\n    },\n    onSearch(e) {\n      this.filter = e;\n    },\n    show(x, y, args = {}) {\n      this.visible = true;\n      this.x = x;\n      this.y = y;\n      this.args = args;\n  \n      this.cancelHide();\n    },\n    hide() {\n      this.visible = false;\n    },\n    additem(title, onClick, path = []) {\n      let items = this.items;\n      for(let level of path) {\n        let exist = items.find(i => i.title === level);\n\n        if(!exist) {\n          exist = { title: level, subitems: [] };\n          items.push(exist)\n        }\n\n        items = exist.subitems || (exist.subitems = []);\n      }\n\n      items.push({ title, onClick });\n    },\n  },\n  updated() {\n    if(this.$refs.menu) {\n      [this.x, this.y] = fitViewport([this.x, this.y], this.$refs.menu)\n    } \n  },\n  mounted() {\n    this.$root.$on('show', this.show);\n    this.$root.$on('hide', this.hide);\n    this.$root.$on('additem', this.additem);\n  },\n  components: {\n    Item,\n    Search\n  }\n}\n</script>\n\n\n<style lang=\"sass\" scoped>\n@import '../vars.sass'\n@import '../common.sass'\n\n.context-menu\n  left: 0\n  top: 0\n  position: fixed\n  padding: 10px\n  width: $width\n  margin-top: -20px\n  margin-left: -$width/2\n  .search\n    @extend .item\n</style>\n","import Menu from './Menu.vue';\nimport Vue from 'vue';\n\nexport default class {\n    \n    constructor(editor, props, vueComponent) {\n        const el = document.createElement('div');\n\n        editor.view.container.appendChild(el);\n\n        this.menu = new Vue({\n            render: h => h(vueComponent || Menu, { props })\n        }).$mount(el);\n    }\n\n    addItem(...args) {\n        this.menu.$emit('additem', ...args);\n    }\n\n    show(...args) {\n        this.menu.$emit('show', ...args);\n    }\n\n    hide() {\n        this.menu.$emit('hide');\n    }\n}","import { createNode, traverse } from \"./utils\";\nimport Menu from \"./menu/index\";\n\nexport default class MainMenu extends Menu {\n  constructor(editor, props, vueComponent, { items, allocate, rename }) {\n    super(editor, props, vueComponent);\n\n    const initialPosition = {\n      x: editor.view.area.mouse.x,\n      y: editor.view.area.mouse.y,\n    };\n\n    console.log(\"INITIAL POSITION\", initialPosition);\n\n    for (const component of editor.components.values()) {\n      const path = allocate(component);\n\n      if (Array.isArray(path)) {\n        // add to the menu if path is array\n        this.addItem(\n          rename(component),\n          async () => {\n            editor.addNode(await createNode(component, initialPosition));\n          },\n          path\n        );\n      }\n    }\n\n    traverse(items, (name, func, path) => this.addItem(name, func, path));\n  }\n}\n","import Menu from './menu/index';\nimport { createNode, traverse } from './utils';\n\nexport default class NodeMenu extends Menu {\n    constructor(editor, props, vueComponent, nodeItems) {\n        super(editor, props, vueComponent);\n\n        if (nodeItems['Delete'] !== false) {\n            this.addItem('Delete', ({ node }) => {\n                if (editor.selected.list.indexOf(node) !== -1) {\n                    editor.selected.remove(node);\n                }\n\n                editor.removeNode(node);\n            });\n        }\n        if (nodeItems['Clone'] !== false) {\n            this.addItem('Clone', async (args) => {\n                const { name, position: [x, y], ...params } = args.node;\n                const component = editor.components.get(name);\n                const node = await createNode(component, { ...params, x: x + 10, y: y + 10 });\n\n                editor.addNode(node);\n            });\n        }\n\n        traverse(nodeItems, (name, func, path) => this.addItem(name, func, path))\n    }\n}\n","import MainMenu from \"./main-menu\";\nimport NodeMenu from \"./node-menu\";\nimport VueItem from \"./menu/Item.vue\";\nimport VueMenu from \"./menu/Menu.vue\";\nimport VueSearch from \"./menu/Search.vue\";\nimport { isFunction } from \"lodash-es\";\n\nconsole.log(\"LOADED CONTEXT MENU\");\n\nfunction install(\n  editor,\n  {\n    searchBar = true,\n    searchKeep = () => false,\n    delay = 1000,\n    items = {},\n    nodeItems = {},\n    allocate = () => [],\n    rename = (component) => component.name,\n    vueComponent = null,\n  }\n) {\n  editor.bind(\"hidecontextmenu\");\n  editor.bind(\"showcontextmenu\");\n\n  let menu = null;\n\n  editor.on(\"hidecontextmenu\", () => {\n    if (menu) menu.hide();\n  });\n\n  editor.on(\"click contextmenu\", () => {\n    editor.trigger(\"hidecontextmenu\");\n  });\n\n  editor.on(\"contextmenu\", ({ e, node }) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    console.log(\"CONTEXT MENU\", e, node);\n\n    if (!editor.trigger(\"showcontextmenu\", { e, node })) return;\n\n    const [x, y] = [e.clientX, e.clientY];\n\n    if (node) {\n      menu = new NodeMenu(\n        editor,\n        { searchBar: false, delay },\n        vueComponent,\n        isFunction(nodeItems) ? nodeItems(node) : nodeItems\n      );\n      menu.show(x, y, { node });\n    } else {\n      menu = new MainMenu(\n        editor,\n        { searchBar, searchKeep, delay },\n        vueComponent,\n        { items, allocate, rename },\n        { x, y }\n      );\n      menu.show(x, y);\n    }\n  });\n}\n\nexport const Menu = VueMenu;\nexport const Item = VueItem;\nexport const Search = VueSearch;\n\nexport default {\n  name: \"context-menu\",\n  install,\n};\n"],"names":["deepCopy","obj","JSON","parse","stringify","createNode","component","data","meta","x","y","node","Object","assign","position","traverse","items","callback","path","keys","map","key","fitViewport","element","Math","min","window","innerWidth","clientWidth","innerHeight","clientHeight","hideMethod","props","delay","type","Number","required","timeoutHide","methods","cancelHide","hide","cancel","mounted","debounce","editor","vueComponent","el","document","createElement","view","container","appendChild","menu","Vue","render","h","Menu","$mount","args","$emit","MainMenu","allocate","rename","initialPosition","area","mouse","console","log","components","values","Array","isArray","addItem","addNode","name","func","NodeMenu","nodeItems","selected","list","indexOf","remove","removeNode","params","get","install","searchBar","searchKeep","bind","on","trigger","e","preventDefault","stopPropagation","clientX","clientY","isFunction","show","VueMenu","Item","VueItem","Search","VueSearch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;SACnBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,GAAf,CAAX,CAAP;;AAGJ,SAAsBI,UAAtB;;;;;wEAAO,iBAA0BC,SAA1B;;;;;;;6BAAuCC,IAAvC,EAAuCA,IAAvC,0BAA8C,EAA9C,+BAAkDC,IAAlD,EAAkDA,IAAlD,0BAAyD,EAAzD,4BAA6DC,CAA7D,EAA6DA,CAA7D,uBAAiE,CAAjE,yBAAoEC,CAApE,EAAoEA,CAApE,uBAAwE,CAAxE;;mBACgBJ,SAAS,CAACD,UAAV,CAAqBL,QAAQ,CAACO,IAAD,CAA7B,CADhB;;;YACGI,IADH;YAGHA,IAAI,CAACH,IAAL,GAAYI,MAAM,CAACC,MAAP,CAAcb,QAAQ,CAACQ,IAAD,CAAtB,EAA8BG,IAAI,CAACH,IAAnC,CAAZ;YACAG,IAAI,CAACG,QAAL,CAAc,CAAd,IAAmBL,CAAnB;YACAE,IAAI,CAACG,QAAL,CAAc,CAAd,IAAmBJ,CAAnB;6CAEOC,IAPJ;;;;;;;;;;;;AAUP,AAAO,SAASI,QAAT,CAAkBC,KAAlB,EAAyBC,QAAzB,EAA8C;MAAXC,IAAW,uEAAJ,EAAI;MAC7C,QAAOF,KAAP,MAAiB,QAArB,EAA+B;EAE/BJ,MAAM,CAACO,IAAP,CAAYH,KAAZ,EAAmBI,GAAnB,CAAuB,UAAAC,GAAG,EAAI;QACtB,OAAOL,KAAK,CAACK,GAAD,CAAZ,KAAsB,UAA1B,EACIJ,QAAQ,CAACI,GAAD,EAAML,KAAK,CAACK,GAAD,CAAX,EAAkBH,IAAlB,CAAR,CADJ,KAGIH,QAAQ,CAACC,KAAK,CAACK,GAAD,CAAN,EAAaJ,QAAb,+BAA2BC,IAA3B,IAAiCG,GAAjC,GAAR;GAJR;;AAQJ,AAAO,SAASC,WAAT,QAA6BC,OAA7B,EAAsC;;MAAhBd,CAAgB;MAAbC,CAAa;;SAClC,CACHc,IAAI,CAACC,GAAL,CAAShB,CAAT,EAAYiB,MAAM,CAACC,UAAP,GAAoBJ,OAAO,CAACK,WAAxC,CADG,EAEHJ,IAAI,CAACC,GAAL,CAASf,CAAT,EAAYgB,MAAM,CAACG,WAAP,GAAqBN,OAAO,CAACO,YAAzC,CAFG,CAAP;;;ACxBJ,iBAAe,UAACC,UAAD;SAAiB;IAC5BC,KAAK,EAAE;MAAEC,KAAK,EAAE;QAAEC,IAAI,EAAEC,MAAR;QAAgBC,QAAQ,EAAE;;KADd;IAE5B7B,IAF4B,kBAErB;aACI;QACH8B,WAAW,EAAE,uBAAM;OADvB;KAHwB;IAO5BC,OAAO,EAAE;MACLC,UADK,wBACQ;YACHC,IAAI,GAAG,KAAKH,WAAlB;YAEIG,IAAI,IAAIA,IAAI,CAACC,MAAjB,EACI,KAAKJ,WAAL,CAAiBI,MAAjB;;KAZgB;IAe5BC,OAf4B,qBAelB;WACDL,WAAL,GAAmBM,QAAQ,CAAC,KAAKZ,UAAL,CAAD,EAAmB,KAAKE,KAAxB,CAA3B;;GAhBO;CAAf;;;ACiBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAA;;;AAhBA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGZ;;;;;;;CAAA;;;AAHA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAA;;;AAtBA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBCEIW,MAAZ,EAAoBZ,KAApB,EAA2Ba,YAA3B,EAAyC;;;QAC/BC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAX;IAEAJ,MAAM,CAACK,IAAP,CAAYC,SAAZ,CAAsBC,WAAtB,CAAkCL,EAAlC;SAEKM,IAAL,GAAY,IAAIC,GAAJ,CAAQ;MAChBC,MAAM,EAAE,gBAAAC,CAAC;eAAIA,CAAC,CAACV,YAAY,IAAIW,IAAjB,EAAuB;UAAExB,KAAK,EAALA;SAAzB,CAAL;;KADD,EAETyB,MAFS,CAEFX,EAFE,CAAZ;;;;;WAKJ,mBAAiB;;;wCAANY,IAAM;QAANA,IAAM;;;yBACRN,IAAL,EAAUO,KAAV,oBAAgB,SAAhB,SAA8BD,IAA9B;;;;WAGJ,gBAAc;;;yCAANA,IAAM;QAANA,IAAM;;;0BACLN,IAAL,EAAUO,KAAV,qBAAgB,MAAhB,SAA2BD,IAA3B;;;;WAGJ,gBAAO;WACEN,IAAL,CAAUO,KAAV,CAAgB,MAAhB;;;;;;;ICrBaC;;;;;oBACPhB,MAAZ,EAAoBZ,KAApB,EAA2Ba,YAA3B,QAAsE;;;QAA3B7B,KAA2B,QAA3BA,KAA2B;QAApB6C,QAAoB,QAApBA,QAAoB;QAAVC,MAAU,QAAVA,MAAU;;;;8BAC9DlB,MAAN,EAAcZ,KAAd,EAAqBa,YAArB;QAEMkB,eAAe,GAAG;MACtBtD,CAAC,EAAEmC,MAAM,CAACK,IAAP,CAAYe,IAAZ,CAAiBC,KAAjB,CAAuBxD,CADJ;MAEtBC,CAAC,EAAEkC,MAAM,CAACK,IAAP,CAAYe,IAAZ,CAAiBC,KAAjB,CAAuBvD;KAF5B;IAKAwD,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCJ,eAAhC;;+CAEwBnB,MAAM,CAACwB,UAAP,CAAkBC,MAAlB,EAV4C;;;;;YAUzD/D,SAVyD;YAW5DY,IAAI,GAAG2C,QAAQ,CAACvD,SAAD,CAArB;;YAEIgE,KAAK,CAACC,OAAN,CAAcrD,IAAd,CAAJ,EAAyB;;gBAElBsD,OAAL,CACEV,MAAM,CAACxD,SAAD,CADR,uEAEE;;;;;kCACEsC,MADF;;2BACuBvC,UAAU,CAACC,SAAD,EAAYyD,eAAZ,CADjC;;;;;gCACSU,OADT;;;;;;;;WAFF,IAKEvD,IALF;;;;0DALgD;;;;;;;;;IAepDH,QAAQ,CAACC,KAAD,EAAQ,UAAC0D,IAAD,EAAOC,IAAP,EAAazD,IAAb;aAAsB,MAAKsD,OAAL,CAAaE,IAAb,EAAmBC,IAAnB,EAAyBzD,IAAzB,CAAtB;KAAR,CAAR;;;;;EA1BkCsC;;;ACHtC;IAGqBoB;;;;;oBACLhC,MAAZ,EAAoBZ,KAApB,EAA2Ba,YAA3B,EAAyCgC,SAAzC,EAAoD;;;;;8BAC1CjC,MAAN,EAAcZ,KAAd,EAAqBa,YAArB;;QAEIgC,SAAS,CAAC,QAAD,CAAT,KAAwB,KAA5B,EAAmC;YAC1BL,OAAL,CAAa,QAAb,EAAuB,gBAAc;YAAX7D,IAAW,QAAXA,IAAW;;YAC7BiC,MAAM,CAACkC,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6BrE,IAA7B,MAAuC,CAAC,CAA5C,EAA+C;UAC3CiC,MAAM,CAACkC,QAAP,CAAgBG,MAAhB,CAAuBtE,IAAvB;;;QAGJiC,MAAM,CAACsC,UAAP,CAAkBvE,IAAlB;OALJ;;;QAQAkE,SAAS,CAAC,OAAD,CAAT,KAAuB,KAA3B,EAAkC;YACzBL,OAAL,CAAa,OAAb;4EAAsB,iBAAOd,IAAP;;;;;;;+BAC4BA,IAAI,CAAC/C,IADjC,EACV+D,IADU,cACVA,IADU,kDACJ5D,QADI,MACOL,CADP,2BACUC,CADV,2BACiByE,MADjB;kBAEZ7E,SAFY,GAEAsC,MAAM,CAACwB,UAAP,CAAkBgB,GAAlB,CAAsBV,IAAtB,CAFA;;yBAGCrE,UAAU,CAACC,SAAD,oCAAiB6E,MAAjB;oBAAyB1E,CAAC,EAAEA,CAAC,GAAG,EAAhC;oBAAoCC,CAAC,EAAEA,CAAC,GAAG;qBAHtD;;;kBAGZC,IAHY;kBAKlBiC,MAAM,CAAC6B,OAAP,CAAe9D,IAAf;;;;;;;;SALJ;;;;;;;;IASJI,QAAQ,CAAC8D,SAAD,EAAY,UAACH,IAAD,EAAOC,IAAP,EAAazD,IAAb;aAAsB,MAAKsD,OAAL,CAAaE,IAAb,EAAmBC,IAAnB,EAAyBzD,IAAzB,CAAtB;KAAZ,CAAR;;;;;EAvB8BsC;;ACItCU,OAAO,CAACC,GAAR,CAAY,qBAAZ;;AAEA,SAASkB,OAAT,CACEzC,MADF,QAYE;4BATE0C,SASF;MATEA,SASF,+BATc,IASd;6BAREC,UAQF;MAREA,UAQF,gCARe;WAAM,KAAN;GAQf;wBAPEtD,KAOF;MAPEA,KAOF,2BAPU,IAOV;wBANEjB,KAMF;MANEA,KAMF,2BANU,EAMV;4BALE6D,SAKF;MALEA,SAKF,+BALc,EAKd;2BAJEhB,QAIF;MAJEA,QAIF,8BAJa;WAAM,EAAN;GAIb;yBAHEC,MAGF;MAHEA,MAGF,4BAHW,UAACxD,SAAD;WAAeA,SAAS,CAACoE,IAAzB;GAGX;+BAFE7B,YAEF;MAFEA,YAEF,kCAFiB,IAEjB;EACAD,MAAM,CAAC4C,IAAP,CAAY,iBAAZ;EACA5C,MAAM,CAAC4C,IAAP,CAAY,iBAAZ;MAEIpC,IAAI,GAAG,IAAX;EAEAR,MAAM,CAAC6C,EAAP,CAAU,iBAAV,EAA6B,YAAM;QAC7BrC,IAAJ,EAAUA,IAAI,CAACZ,IAAL;GADZ;EAIAI,MAAM,CAAC6C,EAAP,CAAU,mBAAV,EAA+B,YAAM;IACnC7C,MAAM,CAAC8C,OAAP,CAAe,iBAAf;GADF;EAIA9C,MAAM,CAAC6C,EAAP,CAAU,aAAV,EAAyB,iBAAiB;QAAdE,CAAc,SAAdA,CAAc;QAAXhF,IAAW,SAAXA,IAAW;IACxCgF,CAAC,CAACC,cAAF;IACAD,CAAC,CAACE,eAAF;IAEA3B,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BwB,CAA5B,EAA+BhF,IAA/B;QAEI,CAACiC,MAAM,CAAC8C,OAAP,CAAe,iBAAf,EAAkC;MAAEC,CAAC,EAADA,CAAF;MAAKhF,IAAI,EAAJA;KAAvC,CAAL,EAAqD;gBAEtC,CAACgF,CAAC,CAACG,OAAH,EAAYH,CAAC,CAACI,OAAd,CAAf;QAAOtF,CAAP;QAAUC,CAAV;;QAEIC,IAAJ,EAAU;MACRyC,IAAI,GAAG,IAAIwB,QAAJ,CACLhC,MADK,EAEL;QAAE0C,SAAS,EAAE,KAAb;QAAoBrD,KAAK,EAALA;OAFf,EAGLY,YAHK,EAILmD,UAAU,CAACnB,SAAD,CAAV,GAAwBA,SAAS,CAAClE,IAAD,CAAjC,GAA0CkE,SAJrC,CAAP;MAMAzB,IAAI,CAAC6C,IAAL,CAAUxF,CAAV,EAAaC,CAAb,EAAgB;QAAEC,IAAI,EAAJA;OAAlB;KAPF,MAQO;MACLyC,IAAI,GAAG,IAAIQ,QAAJ,CACLhB,MADK,EAEL;QAAE0C,SAAS,EAATA,SAAF;QAAaC,UAAU,EAAVA,UAAb;QAAyBtD,KAAK,EAALA;OAFpB,EAGLY,YAHK,EAIL;QAAE7B,KAAK,EAALA,KAAF;QAAS6C,QAAQ,EAARA,QAAT;QAAmBC,MAAM,EAANA;OAJd,EAKL;QAAErD,CAAC,EAADA,CAAF;QAAKC,CAAC,EAADA;OALA,CAAP;MAOA0C,IAAI,CAAC6C,IAAL,CAAUxF,CAAV,EAAaC,CAAb;;GA1BJ;;;AA+BF,IAAa8C,MAAI,GAAG0C;AACpB,IAAaC,MAAI,GAAGC;AACpB,IAAaC,QAAM,GAAGC;AAEtB,YAAe;EACb5B,IAAI,EAAE,cADO;EAEbW,OAAO,EAAPA;CAFF;;;;;"}